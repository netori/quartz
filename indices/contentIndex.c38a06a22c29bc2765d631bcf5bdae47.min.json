{"/":{"title":"index","content":"\n# Technical Information\n- [[writeup/Rance IX|Rance IX]]","lastmodified":"2023-03-10T10:31:10.841846674Z","tags":null},"/content/notes/images/example.png":{"title":"example.png","content":"","lastmodified":"2023-03-10T10:31:10.841846674Z","tags":null},"/writeup/Rance-IX":{"title":"Rance IX","content":"# Abstract\nRance IX is a game made by AliceSoft, and its instructions are interprepted using Alicesoft's proprietary virtual machine (VM): [[System]]. \n\nI crafted an exploit for Rance IX by determining where and how the System interpreter fetches instructions, how these instructions are decoded, and finally writing my own scripts to rewrite how these instructions are executed.\n\n# Context\nSystem is a virtual machine that interprets Alicesoft's proprietary game files (ain, jaf, jam, etc,).\n\n![System-Interprepter](images/system42-interprepter.png)\n\nThis entire graph is a portion of the System interpreter; it's a huge switch-case statement (with over 100 cases), and each case pertains to a particular bytecode that the System interpreter will execute. The execution units that are assigned to a specific bytecode are commonly referred to as handlers.  \n  \nA common practice in reversing virtualized malware, or virtual machines is to follow a process called _lifting, translating, and repackaging_; whereby, the reverse engineer determines exactly what each handler does (_lifting_), somehow convert the information into a language that the CPU and disassemblers understand (_translating_), and finally repackaging the binary (_repackaging_). It's tedious and complicated, but there already are existing tools for the System interpreter like the tools that I had mentioned in my post.\n\n...\n\n# Credits\n-   **nunuhara, kichikuou, OPNA2608 toufuguy** - Thank you all for your work regarding Alicesoft's proprietary engine and file formats. I would not have been able to make any key analyses without the use of your tools. Thank you so much for sharing your work since I have definitely learned a lot about virtual machine architecture and the System engine. \n-   **SomeLoliCatGirl** - Thank you for the wonderful AIN to bytecode decompiler. Your decompiler helped me tremendously with my analysis because I was able to locate where the bytecode was being interpreted and where it was being stored. As a result, I was able to craft my own custom bytecode injections, and effectively localize myself within the System VM architecture without doing much guessing.\n-   **Tim Blazytko** - Great educational video regarding analysis on VM architecture! \n-   **FamousAnos** - Thank you for the save!\n-   **Darkbyte and contributors** - Obviously...","lastmodified":"2023-03-10T10:31:10.841846674Z","tags":null},"/writeup/System":{"title":"System","content":"\u003e [!quote] Brief by [AliceSoft Fandom](https://alicesoft.fandom.com/wiki/System)\n\u003e\n\u003e **System** is a series of [OS](http://en.wikipedia.org/wiki/Operating_system \"wikipedia:Operating system\")/[VM](http://en.wikipedia.org/wiki/Virtual_machine \"wikipedia:Virtual machine\") hybrids that was designed by [Alice Soft](https://alicesoft.fandom.com/wiki/Alice_Soft \"Alice Soft\") to cope with porting their games across different computer platforms. This was especially important in the early days of Alice Soft's history, when there were multiple prevalent families of computers ([PC-98](http://en.wikipedia.org/wiki/NEC_PC-9801 \"wikipedia:NEC PC-9801\"), [x68k](http://en.wikipedia.org/wiki/x68k \"wikipedia:x68k\"), [FM-Towns](http://en.wikipedia.org/wiki/FM-Towns \"wikipedia:FM-Towns\") etc) competing on the Japanese PC market. A similar strategy was used by other developers at the time, such as [Infocom](http://en.wikipedia.org/wiki/Infocom \"wikipedia:Infocom\")'s famous Z-Machine interpreter.\n\nSystem is a process virtual machine desgined by AliceSoft to increase accessbility between different computer platforms. \n\nNotable games that use the System VM:\n- [[writeup/Rance IX |Rance IX]]","lastmodified":"2023-03-10T10:31:10.841846674Z","tags":null}}